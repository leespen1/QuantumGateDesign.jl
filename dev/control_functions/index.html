<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Control Functions · QuantumGateDesign.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QuantumGateDesign.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../problem_setup/">Problem Setup</a></li><li><a class="tocitem" href="../forward_simulation/">Forward Simulation</a></li><li><a class="tocitem" href="../gradient_evaluation/">Gradient Evaluation</a></li><li><a class="tocitem" href="../optimization/">Optimization</a></li><li class="is-active"><a class="tocitem" href>Control Functions</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../visualization/">Visualization</a></li><li><a class="tocitem" href="../function-index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Control Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Control Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/leespen1/QuantumGateDesign.jl/blob/main/docs/src/control_functions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Control-Functions"><a class="docs-heading-anchor" href="#Control-Functions">Control Functions</a><a id="Control-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Control-Functions" title="Permalink"></a></h1><p>The only requirement we have of a control function is that </p><p>Controls are implemented as subtypes of the <a href="#QuantumGateDesign.AbstractControl"><code>AbstractControl</code></a> abstract type.</p><p>Each control has an associated control vector length, which is included as a parameter of the control object. Some controls have half of their control parameters control the real part, while the reamaining half control the imaginary part. By convention, when this is the case we reserve the first half of the control vector for the real-associated parameters, and the second half for the imaginary-associated parameters (as opposed to alternating them).</p><p>When controls are gathered together in a vector, the collective control vector will just be the concatenation of all the individual control vectors.</p><article class="docstring"><header><a class="docstring-binding" id="QuantumGateDesign.AbstractControl" href="#QuantumGateDesign.AbstractControl"><code>QuantumGateDesign.AbstractControl</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract supertype for all controls.</p><p>Every concrete subtype must have the following methods defined:</p><p><strong>Methods</strong></p><ul><li><code>eval_p(control::AbstractControl, t::Real, pcof::AbstractVector{&lt;: Real})</code></li><li><code>eval_q(control::AbstractControl, t::Real, pcof::AbstractVector{&lt;: Real})</code></li></ul><p>Every concrete subtype must have the following parameters:</p><p><strong>Parameters</strong></p><ul><li><code>N_coeff::Int</code></li><li><code>tf::Float64</code></li></ul><p>The following methods can also be handwritten for efficiency, but have defaults implemented using automatic differentiation (currently broken):</p><p><strong>Optional Methods</strong></p><ul><li><code>eval_p_derivative</code></li><li><code>eval_q_derivative</code></li><li><code>eval_grad_p_derivative</code></li><li><code>eval_grad_q_derivative</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/leespen1/QuantumGateDesign.jl/blob/7b6aa4e2e69664c145f0f4fe93b0372bd83d492d/src/Controls/Control.jl#L6-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuantumGateDesign.BSplineControl" href="#QuantumGateDesign.BSplineControl"><code>QuantumGateDesign.BSplineControl</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BSplineControl(tf, D1, omega)</code></pre><p>Construct a control whose value is the sum of Bspline envelopes multiplied by carrier waves.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/leespen1/QuantumGateDesign.jl/blob/7b6aa4e2e69664c145f0f4fe93b0372bd83d492d/src/Controls/bspline_control.jl#L286-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuantumGateDesign.HermiteControl" href="#QuantumGateDesign.HermiteControl"><code>QuantumGateDesign.HermiteControl</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">HermiteControl(N_points, tf, N_derivatives; [scaling_type=:Heuristic])</code></pre><p>Construct a control that is a Hermite interpolating polynomial of the values and first <code>N_derivatives</code> derivatives at <code>N_points</code> evenly spaced points. The control vector gives the values and the derivatives (scaled depending on <code>scaling_type</code>).</p><p><strong>Notes</strong></p><p>Working on making this non-allocating and non-repeating.</p><p>Also remember to eventually change when the 1/j! is applied, for better numerical stability</p><p>Note: I can use a high-order hermite control for a low order method, and pcof still works the same way.</p><p>And for pcof, it is convenient to just reshape a matrix whose columns are the derivatives</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/leespen1/QuantumGateDesign.jl/blob/7b6aa4e2e69664c145f0f4fe93b0372bd83d492d/src/Controls/hermite_control.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuantumGateDesign.HermiteCarrierControl" href="#QuantumGateDesign.HermiteCarrierControl"><code>QuantumGateDesign.HermiteCarrierControl</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">HermiteCarrierControl(N_points, tf, N_derivatives, carrier_wave_freqs; [scaling_type=:Heuristic])</code></pre><p>Construct  a control that is the sum of Hermite interpolating polynomials of the values and first <code>N_derivatives</code> derivatives at <code>N_points</code> evenly spaced points, multiplied by carrier waves. The control vector gives the values and the derivatives (scaled depending on <code>scaling_type</code>) for each of the polynomials multiplied by carrier waves.</p><p><strong>Notes</strong></p><p>Working on making this non-allocating and non-repeating.</p><p>Also remember to eventually change when the 1/j! is applied, for better numerical stability</p><p>Note: I can use a high-order hermite control for a low order method, and pcof still works the same way.</p><p>And for pcof, it is convenient to just reshape a matrix whose columns are the derivatives</p><p>Static arrays could be useful here. Wouldn&#39;t have such a big struct, could just construct them inline on the stack. Just need a N_derivatives struct parameter.</p><p>Idea: Have a version for which we specify N derivatives in pcof, but we use N+M derivatives, which the remainder always being 0. That way we have highly smooth controls, but we don&#39;t have as many control parameters. (right now, 3 carrier waves, 2 points each, 3 derivatives each, uses 48 parameters.)</p><p>Also, as I have more derivatives actually controlled by pcof, the more parameters I have affecting each time interval. Not sure how much that matters, but with B-splines they seemed to think it was good that each point is affected by at most 3 parameters. In my case, that number is 2*(1+N_derivatives)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/leespen1/QuantumGateDesign.jl/blob/7b6aa4e2e69664c145f0f4fe93b0372bd83d492d/src/Controls/hermite_carrier.jl#L1-L32">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../optimization/">« Optimization</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 21 November 2024 23:36">Thursday 21 November 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
